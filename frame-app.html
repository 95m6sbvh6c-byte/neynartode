<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Farcaster Frame Meta Tags -->
  <meta property="fc:frame" content="vNext" />
  <meta property="fc:frame:image" content="https://neynartode.vercel.app/api/frame-image" />
  <meta property="fc:frame:image:aspect_ratio" content="1:1" />
  <meta property="fc:frame:button:1" content="ðŸ”— Connect Wallet" />
  <meta property="fc:frame:button:1:action" content="link" />
  <meta property="fc:frame:button:1:target" content="https://neynartode.vercel.app/app" />
  <meta property="fc:frame:button:2" content="ðŸ“Š View Leaderboard" />
  <meta property="fc:frame:button:2:action" content="post" />
  <meta property="fc:frame:button:2:target" content="https://neynartode.vercel.app/api/leaderboard" />
  <meta property="fc:frame:button:3" content="ðŸ—³ï¸ Vote" />
  <meta property="fc:frame:button:3:action" content="post" />
  <meta property="fc:frame:button:3:target" content="https://neynartode.vercel.app/api/vote" />

  <title>NEYNARtodes - Season 0 Beta</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    .animate-bounce {
      animation: bounce 2s infinite;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script src="https://cdn.jsdelivr.net/npm/ethers@6.9.0/dist/ethers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@farcaster/frame-sdk@0.1.4/dist/browser.min.js"></script>

  <script>
    // Detect if we're in a Farcaster Frame
    const isInFrame = window.parent !== window;
    let frameContext = null;

    // Try to get Frame context
    async function initializeFrame() {
      if (isInFrame && window.frameSDK) {
        try {
          frameContext = await window.frameSDK.context;
          console.log('Frame context:', frameContext);

          // If in frame, show frame-optimized UI
          renderFrameUI();
        } catch (error) {
          console.error('Error getting frame context:', error);
          renderStandardUI();
        }
      } else {
        renderStandardUI();
      }
    }

    function renderFrameUI() {
      document.getElementById('app').innerHTML = `
        <div class="min-h-screen bg-gradient-to-b from-blue-400 via-purple-500 to-blue-900 flex items-center justify-center p-6">
          <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center">
            <div class="text-7xl mb-4 animate-bounce">ðŸ¦Ž</div>
            <h1 class="text-4xl font-black mb-3" style="background: linear-gradient(45deg, #9333ea, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
              Danng Neynartodes!!
            </h1>
            <p class="text-purple-600 font-bold text-sm mb-6">ðŸŒŠ Season 0 Beta ðŸŒŠ</p>

            <div class="mb-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl border-2 border-purple-300">
              <p class="text-sm font-black text-purple-800 mb-2">You're viewing this in a Farcaster Frame!</p>
              <p class="text-xs text-purple-700">
                ${frameContext && frameContext.user ? 'FID: ' + frameContext.user.fid : 'Click buttons above to interact'}
              </p>
            </div>

            <div class="space-y-3">
              <button onclick="window.open('https://neynartode.vercel.app/app', '_blank')" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-4 rounded-xl font-bold text-lg">
                ðŸŽ® Open Full App
              </button>
            </div>

            <div class="mt-6 p-4 bg-blue-50 rounded-xl border-2 border-blue-200">
              <p class="text-xs text-blue-800 mb-1 font-semibold">Requirements:</p>
              <ul class="text-xs text-blue-700 space-y-1 text-left">
                <li>âœ“ 20,000 NEYNARTODES tokens</li>
                <li>âœ“ Season 0 whitelist (74 testers)</li>
                <li>âœ“ Base network</li>
              </ul>
            </div>
          </div>
        </div>
      `;
    }

    function renderStandardUI() {
      // Redirect to main app
      window.location.href = '/app';
    }

    // Initialize
    if (typeof window.frameSDK !== 'undefined') {
      initializeFrame();
    } else {
      // SDK not loaded, use standard UI
      renderStandardUI();
    }
  </script>
</body>
</html>
