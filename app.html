<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Danng Neynartodes!! - Season 0 Beta</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React & ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Ethers.js v6 -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.9.0/dist/ethers.umd.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    #root {
      width: 100%;
      min-height: 100vh;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // Wait for all libraries to load
    if (!window.React || !window.ReactDOM || !window.ethers) {
      console.error('Required libraries not loaded!');
      document.getElementById('root').innerHTML = '<div style="padding: 40px; text-align: center; color: red;"><h1>Error: Libraries failed to load</h1><p>Please refresh the page.</p></div>';
      throw new Error('Required libraries not loaded');
    }

    const { useState, useEffect } = React;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONFIGURATION - SEASON 0 BETA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    const NEYNAR_API_KEY = 'AA2E0FC2-FDC0-466D-9EBA-4BCA968C9B1D';
    const NEYNAR_BASE_URL = 'https://api.neynar.com/v2/farcaster';

    const CONTRACTS = {
      // Season 0 Contracts (ACTIVE)
      prizeNFT: '0x82f5A8CEffce9419886Bb0644FA5D3FB8295Ab81',
      votingManager: '0xFF730AB8FaBfc432c513C57bE8ce377ac77eEc99',

      // V2 System (ACTIVE)
      clankerCollector: '0xAcFC2aD738599f5E5F0B90B11774b279eb2CF280',
      captainHook: '0x38A6C6074f4E14c82dB3bdDe4cADC7Eb2967fa9B',

      // Core Contracts
      treasury: '0xB5A1a3AAD5962dBF2B8DF3C5712d137c1640A176',
      neynartodes: '0x8de1622fe07f56cda2e2273e615a513f1d828b07',
    };

    const TOKEN_GATE = '20000'; // 20K NEYNARTODES for Season 0
    const BASE_RPC = 'https://mainnet.base.org';

    // Whitelist FIDs (74 beta testers)
    const WHITELIST_FIDS = [
      1020, 10956, 202051, 217530, 280534, 368206, 466345, 473136,
      655816, 918820, 1009822, 1188162, 1328864, 8425, 16538, 191870,
      191933, 208744, 217695, 239249, 244344, 250003, 250084, 255153,
      257004, 268567, 277673, 291258, 303218, 332768, 384418, 403173,
      403845, 410577, 418419, 460229, 460627, 484444, 493501, 499575,
      516336, 548258, 560260, 764587, 843635, 851606, 882521, 883491,
      916167, 921736, 924978, 926344, 932195, 978603, 978640, 1024904,
      1045847, 1106257, 1108825, 1109570, 1149403, 1163132, 1278135,
      1336727, 1363858, 1383575, 1400301, 1418938, 1419659, 1419944,
      1439709, 1445897, 1448496
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MAIN APP
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function NeynartodesFullPlatform() {
      // Auth state
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [isCheckingToken, setIsCheckingToken] = useState(false);
      const [tokenBalance, setTokenBalance] = useState('0');
      const [userAddress, setUserAddress] = useState('');
      const [userFid, setUserFid] = useState(null);
      const [userProfile, setUserProfile] = useState(null);
      const [hasAccess, setHasAccess] = useState(false);
      const [isWhitelisted, setIsWhitelisted] = useState(false);

      // View state
      const [currentView, setCurrentView] = useState('leaderboard');

      // Season state
      const [currentSeason, setCurrentSeason] = useState(0); // Season 0
      const [hostPrizePoolETH, setHostPrizePoolETH] = useState('0');
      const [voterPrizePoolETH, setVoterPrizePoolETH] = useState('0');

      // Leaderboard
      const [leaderboardData, setLeaderboardData] = useState([]);
      const [isLoadingLeaderboard, setIsLoadingLeaderboard] = useState(false);

      // Voting state
      const [votesUsedToday, setVotesUsedToday] = useState(0);
      const [votesRemaining, setVotesRemaining] = useState(10);
      const [voterEntries, setVoterEntries] = useState(0);

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // WALLET CONNECTION WITH WEB3
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      const connectWallet = async () => {
        try {
          setIsCheckingToken(true);

          if (!window.ethereum) {
            alert('Please install MetaMask!');
            setIsCheckingToken(false);
            return;
          }

          const provider = new ethers.BrowserProvider(window.ethereum);
          await provider.send('eth_requestAccounts', []);
          const signer = await provider.getSigner();
          const address = await signer.getAddress();

          setUserAddress(address);

          // Check token balance on Base
          const tokenContract = new ethers.Contract(
            CONTRACTS.neynartodes,
            ['function balanceOf(address) external view returns (uint256)'],
            provider
          );

          const balance = await tokenContract.balanceOf(address);
          const formatted = ethers.formatEther(balance);
          setTokenBalance(formatted);

          // Check whitelist in PrizeNFT contract
          const prizeNFTContract = new ethers.Contract(
            CONTRACTS.prizeNFT,
            ['function whitelist(address) external view returns (bool)'],
            provider
          );

          const whitelisted = await prizeNFTContract.whitelist(address);
          setIsWhitelisted(whitelisted);

          // Check token gate (20K NEYNARTODES)
          const required = ethers.parseEther(TOKEN_GATE);
          const hasTokens = balance >= required;

          if (hasTokens && whitelisted) {
            setHasAccess(true);
            setIsLoggedIn(true);

            // Fetch Farcaster profile
            await fetchFarcasterProfile(address);

            // Load leaderboard
            await loadLeaderboard();
          } else {
            setHasAccess(false);
            const reason = !whitelisted
              ? 'You are not whitelisted for Season 0 Beta (74 testers only)'
              : `You need ${TOKEN_GATE} NEYNARTODES tokens (you have ${parseFloat(formatted).toFixed(0)})`;
            alert(`ğŸš« Access Denied!\n\n${reason}`);
          }

          setIsCheckingToken(false);

        } catch (error) {
          console.error('Error connecting wallet:', error);
          alert('Failed to connect wallet. Make sure you're on Base network!');
          setIsCheckingToken(false);
        }
      };

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // NEYNAR API INTEGRATION
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      const fetchFarcasterProfile = async (address) => {
        try {
          const response = await fetch(
            `${NEYNAR_BASE_URL}/user/bulk-by-address?addresses=${address}`,
            {
              headers: {
                'api_key': NEYNAR_API_KEY,
              },
            }
          );

          const data = await response.json();

          if (data && data[address] && data[address][0]) {
            const profile = data[address][0];
            setUserProfile(profile);
            setUserFid(profile.fid);
          }
        } catch (error) {
          console.error('Error fetching Farcaster profile:', error);
        }
      };

      const loadLeaderboard = async () => {
        setIsLoadingLeaderboard(true);

        try {
          // Fetch all 74 whitelisted users from Neynar in batches
          const batchSize = 100;
          let allUsers = [];

          for (let i = 0; i < WHITELIST_FIDS.length; i += batchSize) {
            const batch = WHITELIST_FIDS.slice(i, i + batchSize);
            const fidsParam = batch.join(',');

            const response = await fetch(
              `${NEYNAR_BASE_URL}/user/bulk?fids=${fidsParam}`,
              {
                headers: {
                  'api_key': NEYNAR_API_KEY,
                },
              }
            );

            const data = await response.json();
            if (data.users) {
              allUsers = allUsers.concat(data.users);
            }
          }

          // Transform to leaderboard format
          const leaderboard = allUsers.map((user, idx) => ({
            rank: idx + 1,
            fid: user.fid,
            pfp: user.pfp_url || 'ğŸ¦',
            username: user.username,
            displayName: user.display_name,
            followers: user.follower_count || 0,
            following: user.following_count || 0,
            totalScore: (user.follower_count || 0) * 10, // Simple scoring
            voteScore: 0,
            contests: 0,
            givingPower: 0,
            badges: [],
            verifiedAddresses: user.verified_addresses?.eth_addresses || [],
          }));

          // Sort by totalScore (follower count)
          leaderboard.sort((a, b) => b.totalScore - a.totalScore);

          // Update ranks
          leaderboard.forEach((user, idx) => {
            user.rank = idx + 1;
          });

          setLeaderboardData(leaderboard);
        } catch (error) {
          console.error('Error loading leaderboard:', error);
          alert('Failed to load leaderboard. Check console for details.');
        } finally {
          setIsLoadingLeaderboard(false);
        }
      };

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // VOTING FUNCTIONS - CONNECTED TO BLOCKCHAIN
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      const voteForHost = async (hostFid, isUpvote) => {
        if (votesRemaining <= 0) {
          alert('You have used all 10 votes for today! Come back tomorrow.');
          return;
        }

        try {
          if (!window.ethereum) {
            alert('Please connect your wallet first!');
            return;
          }

          // Connect to VotingManager contract
          const provider = new ethers.BrowserProvider(window.ethereum);
          const signer = await provider.getSigner();

          // VotingManager ABI for voting
          const votingManagerABI = [
            'function vote(uint256 contestId, uint256 candidateFid, bool isUpvote) external',
            'function getVotesUsedToday(address voter) external view returns (uint256)',
            'function MAX_VOTES_PER_DAY() external view returns (uint256)'
          ];

          const votingContract = new ethers.Contract(
            CONTRACTS.votingManager,
            votingManagerABI,
            signer
          );

          // Show loading state
          const votedHost = leaderboardData.find(h => h.fid === hostFid);
          alert(`Submitting ${isUpvote ? 'ğŸ‘ Upvote' : 'ğŸ‘ Downvote'} for @${votedHost.username}...\n\nPlease confirm the transaction in your wallet.`);

          // Submit vote on-chain (contestId = 0 for Season 0)
          const tx = await votingContract.vote(0, hostFid, isUpvote);

          alert(`â³ Transaction submitted!\n\nWaiting for confirmation...\nTx: ${tx.hash.slice(0, 10)}...`);

          // Wait for transaction confirmation
          await tx.wait();

          // Update local state to reflect vote
          const votePoints = isUpvote ? 5000 : -5000;
          const newData = leaderboardData.map(host => {
            if (host.fid === hostFid) {
              return {
                ...host,
                voteScore: host.voteScore + votePoints,
                totalScore: host.totalScore + votePoints
              };
            }
            return host;
          }).sort((a, b) => b.totalScore - a.totalScore);

          // Update ranks
          newData.forEach((user, idx) => {
            user.rank = idx + 1;
          });

          setLeaderboardData(newData);
          setVotesUsedToday(prev => prev + 1);
          setVotesRemaining(prev => prev - 1);

          alert(`âœ… Vote confirmed on-chain!\n\n${isUpvote ? 'ğŸ‘ Upvote' : 'ğŸ‘ Downvote'} cast for @${votedHost.username}!\n\nVotes remaining: ${votesRemaining - 1}/10\n\nTx: ${tx.hash}`);

        } catch (error) {
          console.error('Error voting:', error);

          if (error.code === 'ACTION_REJECTED') {
            alert('âŒ Transaction cancelled by user.');
          } else if (error.message.includes('MAX_VOTES_PER_DAY')) {
            alert('âŒ You have reached your maximum votes for today!');
          } else {
            alert(`âŒ Failed to submit vote:\n\n${error.message}\n\nMake sure you're on Base network and have enough ETH for gas.`);
          }
        }
      };

      const getBadgeEmoji = (badge) => {
        if (badge === 'gold') return 'ğŸ¥‡';
        if (badge === 'silver') return 'ğŸ¥ˆ';
        if (badge === 'bronze') return 'ğŸ¥‰';
        if (badge === 'purple') return 'ğŸŸ£';
        return '';
      };

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // LOGIN SCREEN
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      if (!isLoggedIn) {
        return (
          <div className="min-h-screen bg-gradient-to-b from-blue-400 via-purple-500 to-blue-900 flex items-center justify-center p-6 relative overflow-hidden">
            <div className="absolute inset-0 opacity-20">
              <div className="absolute bottom-0 left-1/4 w-4 h-4 bg-white rounded-full animate-ping" style={{animationDuration: '3s'}}></div>
              <div className="absolute bottom-0 left-1/2 w-6 h-6 bg-white rounded-full animate-ping" style={{animationDuration: '4s', animationDelay: '1s'}}></div>
              <div className="absolute bottom-0 right-1/3 w-3 h-3 bg-white rounded-full animate-ping" style={{animationDuration: '5s', animationDelay: '2s'}}></div>
            </div>

            <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-md w-full text-center relative z-10 border-4 border-purple-400">
              <div className="mb-6">
                <div className="text-7xl mb-4 animate-bounce">ğŸ¦</div>
                <h1 className="text-5xl font-black mb-3" style={{
                  background: 'linear-gradient(45deg, #9333ea, #ec4899, #a855f7)',
                  WebkitBackgroundClip: 'text',
                  WebkitTextFillColor: 'transparent',
                  letterSpacing: '-0.02em'
                }}>
                  Danng<br/>Neynartodes!!
                </h1>
                <p className="text-purple-600 font-bold text-sm">ğŸŒŠ Season 0 Beta Platform ğŸŒŠ</p>
              </div>

              <div className="mb-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl border-2 border-purple-300">
                <div className="text-2xl mb-2">ğŸ”’</div>
                <p className="text-sm font-black text-purple-800 mb-1">SEASON 0 BETA</p>
                <p className="text-xs text-purple-700 font-semibold">
                  74 Whitelisted Testers | 20K Token Gate
                </p>
              </div>

              {isCheckingToken && (
                <div className="mb-4 p-4 bg-blue-100 rounded-xl border-2 border-blue-300">
                  <div className="animate-spin text-3xl mb-2">ğŸŒ€</div>
                  <p className="text-sm font-bold text-blue-800">Checking access...</p>
                </div>
              )}

              <button
                onClick={connectWallet}
                disabled={isCheckingToken}
                className="w-full flex items-center justify-center gap-3 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 hover:from-purple-600 hover:via-pink-600 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-400 text-white px-6 py-5 rounded-2xl font-black text-xl transition-all shadow-lg mb-4 transform hover:scale-105 border-2 border-purple-300"
              >
                <span className="text-2xl">ğŸ‘›</span>
                {isCheckingToken ? 'Checking...' : 'Connect Wallet'}
              </button>

              <div className="mt-8 p-4 bg-purple-50 rounded-xl border-2 border-purple-200">
                <p className="text-sm text-purple-800 mb-2 font-semibold">ğŸ“‹ Season 0 Requirements:</p>
                <ul className="text-xs text-purple-700 space-y-1 text-left">
                  <li>â€¢ Base network wallet (use MetaMask)</li>
                  <li>â€¢ 20,000 NEYNARTODES tokens minimum</li>
                  <li>â€¢ Season 0 whitelist (74 beta testers only)</li>
                  <li>â€¢ Farcaster account (optional, for profile)</li>
                </ul>
              </div>

              <div className="mt-6 p-4 bg-blue-50 rounded-xl border-2 border-blue-200">
                <p className="text-sm text-blue-800 mb-2 font-semibold">ğŸŒŠ Powered by ğŸŒŠ</p>
                <a
                  href="https://dexscreener.com/base/0xfad8f807f3f300d594c5725adb8f54314d465bcb1ab8cc04e37b08c1aa80d2e7"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-purple-600 hover:text-pink-600 font-black text-lg transition-colors"
                >
                  $NEYNARTODES
                </a>
                <p className="font-mono text-xs text-gray-600 mt-2 break-all">
                  {CONTRACTS.neynartodes}
                </p>
              </div>
            </div>
          </div>
        );
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // MAIN PLATFORM UI
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      return (
        <div className="min-h-screen bg-gradient-to-b from-blue-100 via-purple-100 to-pink-100 p-6 relative">
          <div className="fixed inset-0 pointer-events-none opacity-10 overflow-hidden">
            <div className="absolute top-10 left-10 text-6xl">ğŸª¸</div>
            <div className="absolute top-40 right-20 text-5xl">ğŸš</div>
            <div className="absolute bottom-20 left-1/4 text-7xl">ğŸŒŠ</div>
            <div className="absolute bottom-40 right-1/3 text-5xl">ğŸ«§</div>
          </div>

          <div className="max-w-7xl mx-auto relative z-10">
            {/* Header */}
            <div className="bg-gradient-to-r from-purple-400 via-pink-400 to-purple-500 rounded-2xl shadow-2xl p-5 mb-6 border-4 border-purple-300">
              <div className="flex items-center justify-between flex-wrap gap-4">
                <div>
                  <h1 className="text-3xl font-black text-white flex items-center gap-2 drop-shadow-lg">
                    ğŸ¦ Danng Neynartodes!! ğŸŒŠ
                  </h1>
                  <p className="text-sm text-purple-100 font-semibold">
                    {userProfile ? `@${userProfile.username}` : userAddress.slice(0, 6) + '...' + userAddress.slice(-4)}
                    {userFid && <span className="ml-2">FID: {userFid}</span>}
                  </p>
                  <p className="text-xs text-white font-bold mt-1 bg-purple-600 bg-opacity-50 inline-block px-3 py-1 rounded-full">
                    ğŸ¦ {parseFloat(tokenBalance).toLocaleString()} $NEYNARTODES
                  </p>
                </div>
                <div className="flex gap-2 items-center">
                  <div className="bg-white bg-opacity-20 rounded-xl px-4 py-2 text-white">
                    <p className="text-xs font-bold opacity-90">Season 0 Beta</p>
                    <p className="text-lg font-black">74 Testers</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Contract Info Cards */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
              <div className="bg-white rounded-xl shadow-lg p-4 border-2 border-purple-200">
                <p className="text-xs text-purple-600 font-bold mb-1">PrizeNFT Season 0</p>
                <p className="text-xs font-mono text-gray-600 break-all">{CONTRACTS.prizeNFT}</p>
              </div>
              <div className="bg-white rounded-xl shadow-lg p-4 border-2 border-pink-200">
                <p className="text-xs text-pink-600 font-bold mb-1">VotingManager Season 0</p>
                <p className="text-xs font-mono text-gray-600 break-all">{CONTRACTS.votingManager}</p>
              </div>
              <div className="bg-white rounded-xl shadow-lg p-4 border-2 border-blue-200">
                <p className="text-xs text-blue-600 font-bold mb-1">Captain Hook V2</p>
                <p className="text-xs font-mono text-gray-600 break-all">{CONTRACTS.captainHook}</p>
              </div>
              <div className="bg-white rounded-xl shadow-lg p-4 border-2 border-green-200">
                <p className="text-xs text-green-600 font-bold mb-1">Clanker Collector V2</p>
                <p className="text-xs font-mono text-gray-600 break-all">{CONTRACTS.clankerCollector}</p>
              </div>
            </div>

            {/* Voting Info */}
            <div className="bg-gradient-to-r from-pink-100 to-purple-100 rounded-2xl shadow-xl p-6 border-4 border-purple-300 mb-6">
              <div className="flex items-center justify-between flex-wrap gap-4">
                <div>
                  <p className="font-black text-purple-800 text-lg">Your Voting Power Today:</p>
                  <p className="text-sm text-purple-700">Vote for your favorite beta testers!</p>
                </div>
                <div className="text-right">
                  <p className="text-4xl font-black text-purple-600">{votesRemaining}/10</p>
                  <p className="text-xs text-purple-700">Votes Left</p>
                </div>
              </div>
            </div>

            {/* Leaderboard */}
            <div className="bg-white rounded-2xl shadow-2xl p-6 border-4 border-purple-300">
              <div className="flex items-center gap-3 mb-6">
                <span className="text-4xl">ğŸ“Š</span>
                <div>
                  <h2 className="text-3xl font-black text-purple-800">ğŸ¦ Season 0 Beta Testers ğŸ¦</h2>
                  <p className="text-sm text-purple-600 font-bold">74 Whitelisted Participants</p>
                </div>
              </div>

              {isLoadingLeaderboard ? (
                <div className="text-center py-12">
                  <div className="animate-spin text-6xl mb-4">ğŸŒ€</div>
                  <p className="text-xl font-bold text-purple-600">Loading participants from Neynar API...</p>
                </div>
              ) : (
                <div className="overflow-x-auto">
                  <table className="w-full">
                    <thead>
                      <tr className="border-b-2 border-gray-200">
                        <th className="text-left py-3 px-2 font-semibold text-gray-700">Rank</th>
                        <th className="text-left py-3 px-2 font-semibold text-gray-700">User</th>
                        <th className="text-right py-3 px-2 font-semibold text-gray-700">FID</th>
                        <th className="text-right py-3 px-2 font-semibold text-gray-700">Followers</th>
                        <th className="text-right py-3 px-2 font-semibold text-gray-700">Following</th>
                        <th className="text-right py-3 px-2 font-semibold text-gray-700">Score</th>
                        <th className="text-center py-3 px-2 font-semibold text-gray-700">Vote</th>
                      </tr>
                    </thead>
                    <tbody>
                      {leaderboardData.slice(0, 20).map((user) => (
                        <tr key={user.fid} className="border-b-2 border-purple-100 hover:bg-gradient-to-r hover:from-purple-50 hover:to-pink-50 transition-all">
                          <td className="py-4 px-2">
                            <div className={`font-black text-lg ${
                              user.rank === 1 ? 'text-yellow-500 text-xl' :
                              user.rank === 2 ? 'text-gray-400 text-xl' :
                              user.rank === 3 ? 'text-orange-500 text-xl' :
                              'text-purple-600'
                            }`}>
                              {user.rank === 1 ? 'ğŸ‘‘' : user.rank === 2 ? 'ğŸ¥ˆ' : user.rank === 3 ? 'ğŸ¥‰' : `#${user.rank}`}
                            </div>
                          </td>
                          <td className="py-4 px-2">
                            <div className="flex items-center gap-2">
                              {typeof user.pfp === 'string' && user.pfp.startsWith('http') ? (
                                <img src={user.pfp} alt={user.username} className="w-8 h-8 rounded-full" />
                              ) : (
                                <span className="text-2xl">{user.pfp}</span>
                              )}
                              <div>
                                <div className="font-semibold text-gray-800 flex items-center gap-1">
                                  @{user.username}
                                  {user.badges && user.badges.map((badge, idx) => (
                                    <span key={idx} title={badge}>{getBadgeEmoji(badge)}</span>
                                  ))}
                                </div>
                                {user.displayName && (
                                  <div className="text-xs text-gray-500">{user.displayName}</div>
                                )}
                              </div>
                            </div>
                          </td>
                          <td className="py-4 px-2 text-right">
                            <div className="text-sm text-gray-600 font-mono">
                              {user.fid}
                            </div>
                          </td>
                          <td className="py-4 px-2 text-right">
                            <div className="font-semibold text-blue-600">
                              {user.followers.toLocaleString()}
                            </div>
                          </td>
                          <td className="py-4 px-2 text-right">
                            <div className="text-sm text-gray-600">
                              {user.following.toLocaleString()}
                            </div>
                          </td>
                          <td className="py-4 px-2 text-right">
                            <div className="font-bold text-purple-600 text-lg">
                              {user.totalScore.toLocaleString()}
                            </div>
                          </td>
                          <td className="py-4 px-2">
                            <div className="flex gap-1 justify-center">
                              <button
                                onClick={() => voteForHost(user.fid, true)}
                                disabled={votesRemaining <= 0}
                                className="p-2 bg-green-100 hover:bg-green-200 disabled:bg-gray-100 disabled:cursor-not-allowed rounded transition-colors text-lg"
                                title="Upvote (+5000 pts)"
                              >
                                ğŸ‘
                              </button>
                              <button
                                onClick={() => voteForHost(user.fid, false)}
                                disabled={votesRemaining <= 0}
                                className="p-2 bg-red-100 hover:bg-red-200 disabled:bg-gray-100 disabled:cursor-not-allowed rounded transition-colors text-lg"
                                title="Downvote (-5000 pts)"
                              >
                                ğŸ‘
                              </button>
                            </div>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              )}

              <div className="mt-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl border-2 border-purple-300 text-center">
                <p className="font-black text-purple-800 text-lg">ğŸ‰ Season 0 Beta - Test Phase ğŸ‰</p>
                <p className="text-sm text-purple-700 mt-2">
                  Thank you for being one of our 74 whitelisted beta testers!
                </p>
                <p className="text-xs text-purple-600 mt-2">
                  All data loaded live from Neynar API âœ¨
                </p>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<NeynartodesFullPlatform />);
  </script>
</body>
</html>
